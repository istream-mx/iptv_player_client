"use strict";Object.defineProperty(exports,"__esModule",{value:!0});function _interopDefault(e){return e&&"object"==typeof e&&"default"in e?e.default:e}var _newArrowCheck=_interopDefault(require("babel-runtime/helpers/newArrowCheck")),apolloLink=require("apollo-link"),socket=require("@absinthe/socket"),Fun=require("flow-static-land/lib/Fun"),printer=require("graphql/language/printer"),_this=void 0,getRequest=function(e){var t=e.query,r=e.variables;return _newArrowCheck(this,_this),{operation:printer.print(t),variables:r}}.bind(void 0),notifierToObservable=function(e,t,r){return _newArrowCheck(this,_this),function(i){_newArrowCheck(this,_this);var n=void 0,o=!1;return socket.toObservable(e,i,{onError:t,onStart:function(t){_newArrowCheck(this,_this),n=t,o&&socket.cancel(e,n),r&&r(t)}.bind(this),unsubscribe:function(){_newArrowCheck(this,_this),o=!0,n&&socket.cancel(e,n)}.bind(this)})}.bind(this)}.bind(void 0),createAbsintheSocketLink=function(e,t,r){return _newArrowCheck(this,_this),new apolloLink.ApolloLink(Fun.compose(notifierToObservable(e,t,r),function(t){return _newArrowCheck(this,_this),socket.send(e,t)}.bind(this),getRequest))}.bind(void 0);exports.createAbsintheSocketLink=createAbsintheSocketLink;
//# sourceMappingURL=index.js.map
